# Serum Market Maker

This package implements a simple market making strategy as a demo of interacting
with Serum. We highly recommend against using this strategy for any live
trading. 

The strategy maintains 100 quantity at the best bid and best ask. As
the best bid and best ask move around due to market activity, the strategy
cancels outstanding orders and places orders at the new best bid and best offer.
As the market maker's outstanding orders are filled, the market maker places a
new order to replenish the filled quantity.

In production, the market maker would connect to mainnet and interact with an
existing Serum market. To facilitate testing, this example spawns a test
validator locally and initializes a market that participants can interact with.
By convention, the first participant (indexed zero) is the market maker. Other
participants (indexed one, two and three) can place orders through the
serum-place-order example program.

```bash
# Use Solarium to spawn a local Solana validator, initialize a market, and
# initialize the market maker and three other participants. This command writes
# market.json which contains information about the market and its participants.
cargo build
target/debug/create_serum_market

# Start the market making strategy.
cd examples/serum-market-maker
ts-node src/index.ts

# Simulate other participants and see how the market maker responds.
cd examples/serum-place-order

# 1. Participant indexed 1 places BUY 1 @ 100.
#    The participant index doesn't matter for this example.
ts-node src/index.ts \\
  --market-config ../../market.json \\  # The file generated by create_serum_market
  --side buy \\                         # The order direction (buy or sell)
  --price 100 \\                        # The order price
  --size 1                              # The order quantity

# Note that in response to the order, the market maker will adjust to the new
# best bid by cancelling outstanding orders and placing an order of size 100
# at the best bid of 100.

# 2. Participant indexed 2 places SELL 25 @ 100.
#    The participant index doesn't matter for this example.
ts-node src/index.ts \\
  --market-config ../../market.json \\  # The file generated by create_serum_market
  --side sell \\                        # The order direction (buy or sell)
  --price 100 \\                        # The order price
  --size 25 \\                          # The order quantity
  --participant 2

# This sell crosses the best bid and will result in the market maker
# replenishing its bid so that it retains a quantity of 100 on the bid.

# 3. Participant indexed 3 places BUY 10 @ 50.
#    The participant index doesn't matter for this example.
ts-node src/index.ts \\
  --market-config ../../market.json \\  # The file generated by create_serum_market
  --side buy \\                         # The order direction (buy or sell)
  --price 50 \\                         # The order price
  --size 10 \\                          # The order quantity
  --participant 3

# This order doesn't result in any market maker activity because the best bid
# hasn't changed.

# 4. Settle funds for participant 1.
ts-node src/index.ts \\
  --market-config ../../market.json \\  # The file generated by create_serum_market
  --side settle

# This ensures that funds settle. Note that the orders match atomically in any
# case but a separate instruction ensures settlement.
```
